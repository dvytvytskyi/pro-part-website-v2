# üìÑ PDF Generator –¥–ª—è Pro-Part Spain

## –û–ø–∏—Å —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—É

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ—ó –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó PDF-–±—Ä–æ—à—É—Ä –¥–ª—è –ø—Ä–æ–µ–∫—Ç—ñ–≤ –Ω–µ—Ä—É—Ö–æ–º–æ—Å—Ç—ñ –∑ –∫—Ä–∞—Å–∏–≤–∏–º –¥–∏–∑–∞–π–Ω–æ–º —Ç–∞ —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—é –ª–æ–∫–∞–ª—ñ–∑–∞—Ü—ñ—î—é.

## üéØ –ú–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è PDF** –∑ –¥–∞–Ω–∏—Ö –ø—Ä–æ–µ–∫—Ç—É
- ‚úÖ **–ö—Ä–∞—Å–∏–≤–∏–π –¥–∏–∑–∞–π–Ω** –∑ –≥—Ä–∞–¥—ñ—î–Ω—Ç–∞–º–∏ —Ç–∞ —Å—É—á–∞—Å–Ω–∏–º UI
- ‚úÖ **–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞ –ª–æ–∫–∞–ª—ñ–∑–∞—Ü—ñ—è** –≤—Å—ñ—Ö –ø–æ–ª—ñ–≤
- ‚úÖ **–ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –∑–æ–±—Ä–∞–∂–µ–Ω—å** (–ª–æ–≥–æ—Ç–∏–ø + –≥–æ–ª–æ–≤–Ω–µ —Ñ–æ—Ç–æ –ø—Ä–æ–µ–∫—Ç—É)
- ‚úÖ **Responsive –∫–Ω–æ–ø–∫–∞** –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞—Ö –ø—Ä–æ–µ–∫—Ç—ñ–≤
- ‚úÖ **AJAX –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è** –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–æ—Ä—ñ–Ω–∫–∏
- ‚úÖ **–ë–µ–∑–ø–µ–∫–∞** —á–µ—Ä–µ–∑ WordPress nonce
- ‚úÖ **–ê–≤—Ç–æ–æ—á–∏—â–µ–Ω–Ω—è** —Ç–∏–º—á–∞—Å–æ–≤–∏—Ö PDF —Ñ–∞–π–ª—ñ–≤

## üì¶ –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏

1. **mPDF 8.2** - –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó PDF
2. **PDF Generator Handler** (`inc/pdf-generator.php`)
3. **JavaScript Module** (`js/pdf-generator.js`)
4. **–ö–Ω–æ–ø–∫–∏ –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞—Ö**:
   - `pages/offPlanById.php`
   - `pages/secondaryById.php`

## üöÄ –Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î

### 1. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –∫–ª—ñ–∫–∞—î –∫–Ω–æ–ø–∫—É "üìÑ –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ PDF"

### 2. JavaScript –∑–±–∏—Ä–∞—î –¥–∞–Ω—ñ –∑ DOM:
- –ù–∞–∑–≤–∞ –ø—Ä–æ–µ–∫—Ç—É
- –õ–æ–∫–∞—Ü—ñ—è
- –¶—ñ–Ω–∞ —Ç–∞ —Ü—ñ–Ω–∞ –∑–∞ –º¬≤
- –¢–∏–ø, –∫—ñ–º–Ω–∞—Ç–∏, –ø–ª–æ—â–∞
- –ü–æ–≤–µ—Ä—Ö, –∑–¥–∞—á–∞
- –û–ø–∏—Å
- –ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è
- –ó—Ä—É—á–Ω–æ—Å—Ç—ñ

### 3. AJAX –∑–∞–ø–∏—Ç –¥–æ WordPress:
```javascript
action: 'generate_property_pdf'
nonce: security token
...projectData
```

### 4. PHP –≥–µ–Ω–µ—Ä—É—î PDF —á–µ—Ä–µ–∑ mPDF:
- –°—Ç–≤–æ—Ä—é—î HTML —à–∞–±–ª–æ–Ω
- –ö–æ–Ω–≤–µ—Ä—Ç—É—î –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≤ base64
- –ì–µ–Ω–µ—Ä—É—î PDF —Ñ–∞–π–ª
- –ó–±–µ—Ä—ñ–≥–∞—î —Ç–∏–º—á–∞—Å–æ–≤–æ

### 5. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –æ—Ç—Ä–∏–º—É—î PDF –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª—ñ–≤

```
propart-spain/
‚îú‚îÄ‚îÄ composer.json              # –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ (mPDF)
‚îú‚îÄ‚îÄ vendor/                    # –ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ (gitignore)
‚îú‚îÄ‚îÄ inc/
‚îÇ   ‚îî‚îÄ‚îÄ pdf-generator.php      # PHP –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä
‚îú‚îÄ‚îÄ js/
‚îÇ   ‚îî‚îÄ‚îÄ pdf-generator.js       # JavaScript –æ–±—Ä–æ–±–Ω–∏–∫
‚îú‚îÄ‚îÄ pages/
‚îÇ   ‚îú‚îÄ‚îÄ offPlanById.php        # –°—Ç–æ—Ä—ñ–Ω–∫–∞ –ø—Ä–æ–µ–∫—Ç—É (off-plan)
‚îÇ   ‚îî‚îÄ‚îÄ secondaryById.php      # –°—Ç–æ—Ä—ñ–Ω–∫–∞ –ø—Ä–æ–µ–∫—Ç—É (–≤—Ç–æ—Ä–∏–Ω–∫–∞)
‚îî‚îÄ‚îÄ functions.php              # –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –º–æ–¥—É–ª—ñ–≤
```

## üé® –î–∏–∑–∞–π–Ω PDF

PDF –º—ñ—Å—Ç–∏—Ç—å:
- **–®–∞–ø–∫–∞** –∑ –ª–æ–≥–æ—Ç–∏–ø–æ–º —Ç–∞ –Ω–∞–∑–≤–æ—é –ø—Ä–æ–µ–∫—Ç—É
- **–ì–æ–ª–æ–≤–Ω–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è** –ø—Ä–æ–µ–∫—Ç—É
- **–ë–ª–æ–∫ –∑ —Ü—ñ–Ω–æ—é** (—Ñ—ñ–æ–ª–µ—Ç–æ–≤–∏–π –≥—Ä–∞–¥—ñ—î–Ω—Ç)
- **–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏** —É –≤–∏–≥–ª—è–¥—ñ –∫–∞—Ä—Ç–æ–∫:
  - –°—Ç–∞–Ω
  - –¢–∏–ø
  - –ö—ñ–º–Ω–∞—Ç–∏
  - –ü–ª–æ—â–∞
  - –ü–æ–≤–µ—Ä—Ö
  - –ó–¥–∞—á–∞
- **–û–ø–∏—Å –ø—Ä–æ–µ–∫—Ç—É**
- **–ó—Ä—É—á–Ω–æ—Å—Ç—ñ** (—è–∫—â–æ —î)
- **–§—É—Ç–µ—Ä** –∑ –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏:
  - –¢–µ–ª–µ—Ñ–æ–Ω: +34 695 113 333
  - –í–µ–±-—Å–∞–π—Ç: pro-part.es
  - Email: info@pro-part.es

## üîí –ë–µ–∑–ø–µ–∫–∞

- ‚úÖ WordPress nonce –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞
- ‚úÖ –°–∞–Ω—ñ—Ç–∏–∑–∞—Ü—ñ—è –≤—Å—ñ—Ö –¥–∞–Ω–∏—Ö
- ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø—É
- ‚úÖ –ê–≤—Ç–æ–æ—á–∏—â–µ–Ω–Ω—è —Ç–∏–º—á–∞—Å–æ–≤–∏—Ö —Ñ–∞–π–ª—ñ–≤ (—á–µ—Ä–µ–∑ 1 –≥–æ–¥–∏–Ω—É)

## üõ†Ô∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

### –ó–º—ñ–Ω–∞ –¥–∏–∑–∞–π–Ω—É PDF

–†–µ–¥–∞–≥—É–π—Ç–µ —Ñ—É–Ω–∫—Ü—ñ—é `generate_pdf_html()` –≤ `inc/pdf-generator.php`:

```php
// –ó–º—ñ–Ω–∏—Ç–∏ –∫–æ–ª—å–æ—Ä–∏
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);

// –ó–º—ñ–Ω–∏—Ç–∏ —à—Ä–∏—Ñ—Ç
'default_font' => 'dejavusans'

// –î–æ–¥–∞—Ç–∏ –Ω–æ–≤—ñ —Å–µ–∫—Ü—ñ—ó
$html .= '<div class="new-section">...</div>';
```

### –î–æ–¥–∞—Ç–∏ –Ω–æ–≤—ñ –ø–æ–ª—è

1. –í JavaScript (`js/pdf-generator.js`):
```javascript
projectData = {
    ...
    newField: $('#newFieldId').text()
}
```

2. –í PHP (`inc/pdf-generator.php`):
```php
'newField' => sanitize_text_field($_POST['newField'] ?? '')
```

3. –í HTML —à–∞–±–ª–æ–Ω—ñ:
```php
$html .= '<div>' . htmlspecialchars($data['newField']) . '</div>';
```

## üêõ –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### PDF –Ω–µ –≥–µ–Ω–µ—Ä—É—î—Ç—å—Å—è?

1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ PHP error log:
```bash
tail -f /var/log/php-error.log
```

2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ JavaScript –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)

3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø—É –¥–æ –ø–∞–ø–∫–∏ uploads:
```bash
chmod 755 wp-content/uploads
```

### –ö–Ω–æ–ø–∫–∞ –Ω–µ –ø—Ä–∞—Ü—é—î?

1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –ø—ñ–¥–∫–ª—é—á–µ–Ω–∏–π jQuery
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –ø–æ–º–∏–ª–∫–∏ JavaScript
3. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å, —â–æ `pdfGeneratorData` –¥–æ—Å—Ç—É–ø–Ω–∏–π –≤ JS

### –ö–∏—Ä–∏–ª–∏—Ü—è –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ?

mPDF –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —à—Ä–∏—Ñ—Ç `dejavusans` —è–∫–∏–π –ø—ñ–¥—Ç—Ä–∏–º—É—î –∫–∏—Ä–∏–ª–∏—Ü—é.
–Ø–∫—â–æ –ø—Ä–æ–±–ª–µ–º–∞ –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è, –¥–æ–¥–∞–π—Ç–µ —à—Ä–∏—Ñ—Ç –≤—Ä—É—á–Ω—É:

```php
$mpdf = new \Mpdf\Mpdf([
    'fontDir' => ['/path/to/fonts'],
    'fontdata' => [...],
    'default_font' => 'custom-font'
]);
```

## üìù TODO / –ú–∞–π–±—É—Ç–Ω—ñ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è

- [ ] –î–æ–¥–∞—Ç–∏ –≤–∏–±—ñ—Ä –º–æ–≤–∏ PDF (EN/UA/ES)
- [ ] –ï–∫—Å–ø–æ—Ä—Ç –¥–µ–∫—ñ–ª—å–∫–æ—Ö –ø—Ä–æ–µ–∫—Ç—ñ–≤ –≤ –æ–¥–∏–Ω PDF
- [ ] Email –≤—ñ–¥–ø—Ä–∞–≤–∫–∞ PDF
- [ ] QR –∫–æ–¥ –∑ –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º –Ω–∞ –ø—Ä–æ–µ–∫—Ç
- [ ] –î–æ–¥–∞—Ç–∏ –∫–∞—Ä—Ç—É –ª–æ–∫–∞—Ü—ñ—ó
- [ ] Watermark –∑ –ª–æ–≥–æ—Ç–∏–ø–æ–º
- [ ] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—å

## ü§ù –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

–ü—Ä–∏ –≤–∏–Ω–∏–∫–Ω–µ–Ω–Ω—ñ –ø–∏—Ç–∞–Ω—å –∞–±–æ –ø—Ä–æ–±–ª–µ–º:
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Ü–µ–π README
2. –ü–æ–¥–∏–≤—ñ—Ç—å—Å—è –ª–æ–≥–∏ –ø–æ–º–∏–ª–æ–∫
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ browser console

## üìä –¢–µ—Ö–Ω—ñ—á–Ω—ñ –≤–∏–º–æ–≥–∏

- PHP 7.4+
- WordPress 5.0+
- mPDF 8.2+
- jQuery (–≤–∂–µ —î –≤ WordPress)
- GD –∞–±–æ Imagick –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –∑–æ–±—Ä–∞–∂–µ–Ω—å

## ‚ö° –ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å

- –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è PDF: ~2-4 —Å–µ–∫—É–Ω–¥–∏
- –†–æ–∑–º—ñ—Ä PDF: ~200KB - 2MB (–∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –∑–æ–±—Ä–∞–∂–µ–Ω—å)
- –ê–≤—Ç–æ–æ—á–∏—â–µ–Ω–Ω—è —Å—Ç–∞—Ä–∏—Ö PDF: —â–æ–≥–æ–¥–∏–Ω–∏
- –¢–∏–º—á–∞—Å–æ–≤—ñ —Ñ–∞–π–ª–∏ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è: 1 –≥–æ–¥–∏–Ω–∞

## üìÑ –õ—ñ—Ü–µ–Ω–∑—ñ—è

–ß–∞—Å—Ç–∏–Ω–∞ —Ç–µ–º–∏ Pro-Part Spain. –í—Å—ñ –ø—Ä–∞–≤–∞ –∑–∞—Ö–∏—â–µ–Ω—ñ.

---

**–°—Ç–≤–æ—Ä–µ–Ω–æ:** 20.10.2025  
**–í–µ—Ä—Å—ñ—è:** 1.0.0  
**–ê–≤—Ç–æ—Ä:** Pro-Part Development Team

