╔═══════════════════════════════════════════════════════════════════╗
║  ✋ ПЛАН РУЧНОГО ОЧИЩЕННЯ (покроково)                             ║
╚═══════════════════════════════════════════════════════════════════╝

ДОБРА НОВИНА: Основні WordPress файли ЧИСТІ! ✅
- wp-load.php ✓
- wp-blog-header.php ✓
- wp-includes/load.php ✓
- wp-config.php ✓

ПОГАНА НОВИНА: 14+ файлів повністю заражені

═══════════════════════════════════════════════════════════════════
ТИП 1: ПОВНІСТЮ ШКІДЛИВІ ФАЙЛИ (просто видалити)
═══════════════════════════════════════════════════════════════════

❌ ФАЙЛИ ЯКІ НЕ ПОВИННІ ІСНУВАТИ В WORDPRESS:
   (можна просто видалити, не боячись зламати сайт)

1. /pro-part.es/wp-class.php
   └─> Видалити повністю ❌

2. /pro-part.es/wp-class.gz  
   └─> Видалити повністю ❌

3. /pro-part.es/defaults.php
   └─> Видалити повністю ❌

4. /pro-part.es/options.php (в корені!)
   └─> Видалити повністю ❌
   ⚠️  НЕ плутати з /wp-admin/options.php!

5. /pro-part.es/product.php
   └─> Видалити повністю ❌

6. /pro-part.es/search.php (ПЕРЕВІРИТИ!)
   └─> Можливо це має бути шаблон теми
   └─> Подивіться чи використовується
   └─> Якщо ні - видалити ❌

7. Всі папки з дивними назвами:
   /d65be/
   /d65be+55/
   └─> Видалити повністю ❌

═══════════════════════════════════════════════════════════════════
ТИП 2: СТАНДАРТНІ ФАЙЛИ WP, ПОВНІСТЮ ПЕРЕЗАПИСАНІ
═══════════════════════════════════════════════════════════════════

❌ ЦІ ФАЙЛИ ПОТРІБНІ WordPress, АЛЕ ЗАРАЖЕНІ:
   (треба завантажити чисті версії)

1. /wp-admin/options.php
   └─> Завантажити чисту версію з WordPress.org
   
2. /wp-admin/plugins.php
   └─> Завантажити чисту версію з WordPress.org

📥 ЯК ВІДНОВИТИ:
   а) Дізнайтесь версію WordPress:
      - Відкрийте /wp-includes/version.php
      - Знайдіть $wp_version
      
   б) Завантажте ту ж версію з wordpress.org:
      https://wordpress.org/download/releases/
      
   в) Розпакуйте і скопіюйте ТІЛЬКИ ці файли

═══════════════════════════════════════════════════════════════════
ТИП 3: ФЕЙКОВІ INDEX.PHP У ПІДПАПКАХ
═══════════════════════════════════════════════════════════════════

❌ ВИДАЛИТИ ЦІ INDEX.PHP (вони не повинні там бути):

У темі propart-spain:
1. /wp-content/themes/propart-spain/icons/map/galleries/index.php
2. /wp-content/themes/propart-spain/icons/shared/post-catalog/index.php
3. /wp-content/themes/propart-spain/images/benahavispage/requests/index.php
4. /wp-content/themes/propart-spain/images/marbellapage/index.php
5. /wp-content/themes/propart-spain/assets/blog-sorting/index.php

У темі twentytwentyfive:
6. /wp-content/themes/twentytwentyfive/assets/css/cloudflare/index.php

У wp-includes:
7. /wp-includes/SimplePie/library/SimplePie/Decode/cloudflare/index.php
8. /wp-includes/sodium_compat/src/Core32/Poly1305/i18ns/index.php
9. /wp-includes/sodium_compat/src/Core/ChaCha20/i18ns/index.php

⚠️  Ці index.php НЕ потрібні - у цих папках взагалі не повинно бути PHP файлів!

═══════════════════════════════════════════════════════════════════
ТИП 4: ЧАСТКОВО ЗАРАЖЕНИЙ ФАЙЛ
═══════════════════════════════════════════════════════════════════

📝 /pro-part.es/index.php - ТІЛЬКИ ПЕРШИЙ РЯДОК ШКІДЛИВИЙ

БУЛО (2 рядки):
┌─────────────────────────────────────────────────────────────┐
│ <?php include 'compress.zlib://wp-class.gz';                │ ← ВИДАЛИТИ
│ <?php                                                        │ ← ЗАЛИШИТИ
│ /**                                                          │
│  * Front to the WordPress application...                    │
└─────────────────────────────────────────────────────────────┘

МАЄ БУТИ (1 рядок):
┌─────────────────────────────────────────────────────────────┐
│ <?php                                                        │
│ /**                                                          │
│  * Front to the WordPress application...                    │
└─────────────────────────────────────────────────────────────┘

✏️  ЯК ПОЧИСТИТИ:
1. Відкрийте файл у редакторі
2. Видаліть ТІЛЬКИ перший рядок з include
3. Збережіть

═══════════════════════════════════════════════════════════════════
ТИП 5: ПІДОЗРІЛІ ПАПКИ З ЧИСЛОВИМИ НАЗВАМИ
═══════════════════════════════════════════════════════════════════

❌ ВИДАЛИТИ ЦІ ПАПКИ ПОВНІСТЮ:

/wp-admin/maint/310698/
/wp-admin/network/511825/
/wp-includes/block-supports/790602/
/wp-includes/pomo/352882/
/wp-includes/html-api/296918/
/wp-includes/sitemaps/providers/996923/
/wp-includes/images/media/756030/
/wp-includes/css/dist/list-reusable-blocks/682616/
/wp-includes/css/dist/block-directory/499437/

📌 Ці папки НЕ існують у стандартному WordPress!

═══════════════════════════════════════════════════════════════════
ПОКРОКОВА ІНСТРУКЦІЯ:
═══════════════════════════════════════════════════════════════════

✅ КРОК 1: БЕКАП (обов'язково!)
─────────────────────────────────────────────────────────────
Термінал:
cd /Users/vytvytskyi/Downloads/htdocs
cp -r pro-part.es pro-part.es.BACKUP_$(date +%Y%m%d_%H%M%S)

Це створить копію з датою і часом.

✅ КРОК 2: Видалити явно шкідливі файли (Тип 1)
─────────────────────────────────────────────────────────────
Термінал:
cd /Users/vytvytskyi/Downloads/htdocs/pro-part.es

rm -f wp-class.php
rm -f wp-class.gz
rm -f defaults.php
rm -f options.php
rm -f product.php
rm -rf d65be
rm -rf d65be+55

⚠️  НЕ видаляйте search.php поки не перевірите чи він використовується!

🔍 Перевірка: Спробуйте відкрити сайт. Має працювати!

✅ КРОК 3: Почистити index.php (Тип 4)
─────────────────────────────────────────────────────────────
Вручну в редакторі:
1. Відкрийте /pro-part.es/index.php
2. Видаліть рядок 1: <?php include 'compress.zlib://wp-class.gz';
3. Збережіть

АБО в терміналі (автоматично):
cd /Users/vytvytskyi/Downloads/htdocs/pro-part.es
cp index.php index.php.backup
sed -i '' '1d' index.php

🔍 Перевірка: Сайт має працювати ще краще!

✅ КРОК 4: Видалити фейкові index.php (Тип 3)
─────────────────────────────────────────────────────────────
Термінал:
cd /Users/vytvytskyi/Downloads/htdocs/pro-part.es

# У темах
rm -f wp-content/themes/propart-spain/icons/map/galleries/index.php
rm -f wp-content/themes/propart-spain/icons/shared/post-catalog/index.php
rm -f wp-content/themes/propart-spain/images/benahavispage/requests/index.php
rm -f wp-content/themes/propart-spain/images/marbellapage/index.php
rm -f wp-content/themes/propart-spain/assets/blog-sorting/index.php
rm -rf wp-content/themes/twentytwentyfive/assets/css/cloudflare

# У wp-includes
rm -rf wp-includes/SimplePie/library/SimplePie/Decode/cloudflare
rm -rf wp-includes/sodium_compat/src/Core32/Poly1305/i18ns
rm -rf wp-includes/sodium_compat/src/Core/ChaCha20/i18ns

🔍 Перевірка: Все має працювати як і раніше

✅ КРОК 5: Видалити підозрілі папки (Тип 5)
─────────────────────────────────────────────────────────────
Термінал:
cd /Users/vytvytskyi/Downloads/htdocs/pro-part.es

rm -rf wp-admin/maint/310698
rm -rf wp-admin/network/511825
rm -rf wp-includes/block-supports/790602
rm -rf wp-includes/pomo/352882
rm -rf wp-includes/html-api/296918
rm -rf wp-includes/sitemaps/providers/996923
rm -rf wp-includes/images/media/756030
rm -rf wp-includes/css/dist/list-reusable-blocks/682616
rm -rf wp-includes/css/dist/block-directory/499437

🔍 Перевірка: Сайт працює нормально

✅ КРОК 6: Відновити стандартні файли WP (Тип 2)
─────────────────────────────────────────────────────────────

6.1. Дізнайтесь версію WordPress:
    Відкрийте: /wp-includes/version.php
    Знайдіть рядок: $wp_version = '6.x.x';

6.2. Завантажте ТУ Ж версію WordPress:
    https://wordpress.org/download/releases/

6.3. Розпакуйте ZIP у окрему папку

6.4. Скопіюйте ТІЛЬКИ ці файли:
    cp wordpress/wp-admin/options.php pro-part.es/wp-admin/options.php
    cp wordpress/wp-admin/plugins.php pro-part.es/wp-admin/plugins.php

🔍 Перевірка: Зайдіть в wp-admin, має працювати!

═══════════════════════════════════════════════════════════════════
ПІСЛЯ ОЧИЩЕННЯ:
═══════════════════════════════════════════════════════════════════

1. ✅ Перевірте .htaccess на шкідливі правила
2. ✅ Змініть ВСІ паролі
3. ✅ Оновіть ключі безпеки в wp-config.php
4. ✅ Оновіть WordPress, теми, плагіни
5. ✅ Встановіть плагін безпеки (Wordfence)
6. ✅ Проскануйте онлайн: https://sitecheck.sucuri.net

═══════════════════════════════════════════════════════════════════
ОЦІНКА СКЛАДНОСТІ:
═══════════════════════════════════════════════════════════════════

⏱️  Час: 30-60 хвилин
📊 Складність: Середня
🎓 Рівень: Можна зробити самостійно

✅ ПЛЮСИ ручного очищення:
   - Повний контроль
   - Розумієте що робите
   - Можете перевіряти кожен крок
   - Не втратите дані

⚠️  МІНУСИ:
   - Довше ніж автоматичне
   - Можна пропустити якийсь файл
   - Потрібна уважність

═══════════════════════════════════════════════════════════════════
ВИСНОВОК:
═══════════════════════════════════════════════════════════════════

✅ ТАК, можна почистити вручну!
✅ Файли НЕ перемішані - кожен файл або повністю чистий, або повністю шкідливий
✅ Тільки 1 файл (index.php) має 1 шкідливий рядок серед нормального коду
✅ Основні WordPress файли НЕ зачеплені

Ризик зламати сайт: НИЗЬКИЙ (якщо робити по інструкції)

